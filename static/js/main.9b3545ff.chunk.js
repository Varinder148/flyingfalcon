(this.webpackJsonpflyingfalcon=this.webpackJsonpflyingfalcon||[]).push([[0],{42:function(e,t,n){},48:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(19),r=n.n(a),l=(n(42),n(6)),s=n(35),i=n(5),u=(n(48),n(13)),o=n.n(u),b=n(16),d={ADD_PLANET:"ADD_PLANET",ADD_VEHICLE:"ADD_VEHICLE",RESET_PLAYER:"RESET_PLAYER"},j=n(18),h=(n(50),n(34)),f=n(12),O=n(2),p={START_FETCHING:"START_FETCHING",REQUEST_SUCCESS:"REQUEST_SUCCESS",REQUEST_FAIL:"REQUEST_FAIL",FILTER_PLANETS:"FILTER_PLANETS",DISABLE_CORRESPONDING_VEHICLES:"DISABLE_CORRESPONDING_VEHICLES",CALCULATE_VEHICLE_COUNT:"CALCULATE_VEHICLE_COUNT",UPDATE_RESULT:"UPDATE_RESULT",RESET_GAME:"RESET_GAME"},v=function(e,t){var n=Object.values(t);return e.filter((function(e){return!n.find((function(t){return t.name===e.name}))}))},E=function(e,t,n,c,a){var r=c.map((function(e){var n=e.max_distance<t.distance,c=a.find((function(t){return t.name===e.name}));return n=n||c<=0,Object(O.a)(Object(O.a)({},e),{},{disabled:n})}));return Object(O.a)(Object(O.a)({},n),{},Object(f.a)({},e,r))},m=function(e,t){var n=[];return e=Object.values(e),t.forEach((function(t){var c=e.filter((function(e){return t.name===e.name})),a=t.total_no-c.length;a=a<=0?0:a;var r={name:t.name,total_no:a};n.push(r)})),n},S={token:{value:"",error:"",isFetching:!1},planets:{value:[],error:"",isFetching:!1},vehicles:{value:[],error:"",isFetching:!1},filteredPlanets:{},filteredVehicles:{},availableVehicleCount:[],result:{value:"",error:"",isFetching:!1}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.START_FETCHING:return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},t.requestType,Object(O.a)(Object(O.a)({},e[t.requestType]),{},{isFetching:!0})));case p.REQUEST_SUCCESS:return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},t.requestType,Object(O.a)(Object(O.a)({},e[t.requestType]),{},{isFetching:!1,value:t.payload})));case p.REQUEST_FAIL:return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},t.requestType,Object(O.a)(Object(O.a)({},e[t.requestType]),{},{isFetching:!1,error:t.msg})));case p.FILTER_PLANETS:return Object(O.a)(Object(O.a)({},e),{},{filteredPlanets:v(e.planets.value,t.payload)});case p.DISABLE_CORRESPONDING_VEHICLES:return Object(O.a)(Object(O.a)({},e),{},{filteredVehicles:E(t.selectorId,t.payload,e.filteredVehicles,e.vehicles.value,e.availableVehicleCount)});case p.CALCULATE_VEHICLE_COUNT:return Object(O.a)(Object(O.a)({},e),{},{availableVehicleCount:m(t.playerVehicles,e.vehicles.value)});case p.RESET_GAME:return S;default:return e}},g={selectedPlanets:{},selectedVehicles:{}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.ADD_PLANET:return Object(O.a)(Object(O.a)({},e),{},{selectedPlanets:Object(O.a)(Object(O.a)({},e.selectedPlanets),{},Object(f.a)({},t.selectorId,t.payload))});case d.ADD_VEHICLE:return Object(O.a)(Object(O.a)({},e),{},{selectedVehicles:Object(O.a)(Object(O.a)({},e.selectedVehicles),{},Object(f.a)({},t.selectorId,t.payload))});case d.RESET_PLAYER:return g;default:return e}},_=Object(j.b)({game:T,player:y}),x=[h.a];var C=Object(j.c)(_,j.a.apply(void 0,x)),A=n(14),P=n.n(A),V=function(e){return{type:p.START_FETCHING,requestType:e}},L=function(e,t){return{type:p.REQUEST_SUCCESS,payload:t,requestType:e}},I=function(e,t){return{type:p.REQUEST_FAIL,requestType:e,msg:t}},R=function(){return function(e){e(function(){var e=Object(b.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="token",e.prev=1,t(V(n)),e.next=5,P.a.post("/token");case 5:c=e.sent,t(L(n,c.data.token)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(I(n,"Something went wrong while fetching token"));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(b.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="planets",e.prev=1,t(V(n)),e.next=5,P.a.get("/planets");case 5:c=e.sent,t(L(n,c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(I(n,"Something went wrong while fetching Planets"));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(b.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="vehicles",e.prev=1,t(V(n)),e.next=5,P.a.get("/vehicles");case 5:c=e.sent,t(L(n,c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(I(n,"Something went wrong while fetching Vehicles."));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}},N=function(e,t){return function(n){n(function(e,t){return{type:d.ADD_PLANET,payload:t,selectorId:e}}(e,t));var c=C.getState().player.selectedPlanets;n({type:p.FILTER_PLANETS,payload:c}),n(function(e,t){return{type:p.DISABLE_CORRESPONDING_VEHICLES,payload:t,selectorId:e}}(e,t))}},F=function(e,t){return function(n){n(function(e,t){return{type:d.ADD_VEHICLE,payload:t,selectorId:e}}(e,t)),n(function(e,t,n){return{type:p.CALCULATE_VEHICLE_COUNT,payload:t,selectorId:e,playerVehicles:n}}(e,t,C.getState().player.selectedVehicles))}},k=function(e){return e.map((function(e){return e.name}))},w=function(){return function(e){e({type:p.RESET_GAME}),e({type:d.RESET_PLAYER}),e(R())}},D=(n(69),n(1)),U=Object(l.b)(null,(function(e){return{resetFullGame:function(){return e(w())}}}))((function(e){var t=e.resetFullGame;return Object(D.jsx)("ul",{className:"navbar",children:Object(D.jsx)("li",{onClick:t,children:"Reset"})})})),G=function(){return Object(D.jsx)("div",{className:"header-wrapper",children:Object(D.jsxs)("header",{children:[Object(D.jsx)("h2",{className:"logo",children:"Flying Falcon"}),Object(D.jsx)(U,{})]})})},H=(n(71),n(36)),q=n(37),J=n(4),Q=(n(72),function(e){return e.game}),B=Object(J.a)([Q],(function(e){return e.planets})),Y=Object(J.a)([Q],(function(e){return e.vehicles})),M=Object(J.a)([Q],(function(e){return e.result})),z=Object(J.a)([Q],(function(e){return e.filteredPlanets})),K=Object(J.a)([Q],(function(e){return e.filteredVehicles})),W=(Object(J.a)([Q],(function(e){return e.vehicleCount})),Object(J.a)([Q],(function(e){return e.availableVehicleCount}))),X=function(e){return e.player},Z=Object(J.a)([X],(function(e){return e.selectedPlanets})),$=Object(J.a)([X],(function(e){return e.selectedVehicles})),ee=Object(J.a)([X],(function(e){return te(e.selectedPlanets,e.selectedVehicles)})),te=function(e,t){var n=Object.keys(e),c=0;return n.forEach((function(n){var a=0,r=1;e[n]&&t[n]&&(a=e[n].distance,r=t[n].speed);var l=a/r;c+=l||0})),c},ne=Object(J.b)({selectFilteredPlanets:z,selectPlayerSelectedPlanets:Z}),ce=Object(l.b)(ne,(function(e){return{addPlanet:function(t,n){e(N(t,n))},addVehicle:function(t){return e(F(t,""))}}}))((function(e){var t=e.selectorId,n=e.showVehicles,a=e.setShowVehicles,r=e.selectPlanets,l=e.selectFilteredPlanets,s=e.selectPlayerSelectedPlanets,i=e.addPlanet,u=e.addVehicle;Object(c.useEffect)((function(){s[t]?a(!0):a(!1)}),[n,s,t,a]);var o=r.value;return l.length>0&&(o=l),Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("select",{onChange:function(e){e.preventDefault(),n||a(!0);var c=JSON.parse(e.target.value);i(t,c),u(t)},value:JSON.stringify(s[t]),defaultValue:"empty",children:[Object(D.jsx)("option",{disabled:!0,value:"empty",children:"-- Pick a Planet --"}),o.map((function(e){return Object(D.jsx)("option",{value:JSON.stringify(e),children:e.name},e.name)})),s[t]?Object(D.jsx)("option",{value:JSON.stringify(s[t]),children:s[t].name}):null]})})})),ae=(n(73),Object(J.b)({selectFilteredVehicles:K,selectPlayerSelectedVehicles:$,selectAvailableVehicleCount:W})),re=Object(l.b)(ae,(function(e){return{addVehicle:function(t,n){return e(F(t,n))}}}))((function(e){var t=e.selectorId,n=e.addVehicle,c=e.selectVehicles,a=e.selectFilteredVehicles,r=e.selectPlayerSelectedVehicles,l=e.selectAvailableVehicleCount,s=function(e){var c=e.target.value;n(t,c?JSON.parse(c):null)},i=c.value;a[t]&&(i=a[t]);var u=function(e){var t=l.find((function(t){return t.name===e.name}));return t?t.total_no:e.total_no},o=function(e){return r[t]&&e.name===r[t].name||!1};return Object(D.jsx)("div",{className:"vehicle-menu",children:i.map((function(e,n){return Object(D.jsxs)("div",{children:[Object(D.jsx)("input",{id:"veh".concat(n).concat(t),type:"radio",name:"vehicle".concat(t),value:JSON.stringify(e),checked:!e.disabled&&o(e),onChange:s,disabled:(e.disabled||0===u(e))&&!o(e)}),Object(D.jsx)("label",{htmlFor:"veh".concat(n).concat(t),children:"".concat(e.name," (").concat(u(e),")")})]},e.name)}))})})),le=["selectVehicles","selectPlanets"],se=Object(l.b)((function(){return Object(J.b)({selectVehicles:Y,selectPlanets:B})}))((function(e){var t=e.selectVehicles,n=e.selectPlanets,a=Object(q.a)(e,le),r=Object(c.useState)(!1),l=Object(H.a)(r,2),s=l[0],i=l[1];return Object(D.jsxs)(D.Fragment,{children:[0!==n.value.length&&Object(D.jsx)(ce,Object(O.a)(Object(O.a)({},a),{},{showVehicles:s,setShowVehicles:i,selectPlanets:n})),0!==n.value.length&&s&&Object(D.jsx)(re,Object(O.a)(Object(O.a)({},a),{},{selectVehicles:t}))]})})),ie=Object(J.b)({selectTimeTaken:ee}),ue=Object(l.b)(ie)((function(e){var t=e.selectTimeTaken;return Object(D.jsxs)(D.Fragment,{children:["Time Taken:",t||0]})})),oe=(n(74),Object(J.b)({selectResult:M})),be=Object(l.b)(oe)((function(e){var t=e.selectResult;return Object(D.jsx)("div",{className:"msg ".concat(""===t.error&&t.value.includes("found")?"green":"red"),children:""!==t.error?t.error:t.value})})),de=Object(J.b)({selectResult:M}),je=Object(l.b)(de,(function(e){return{launchSearchAsync:function(){return e(function(){var e=Object(b.a)(o.a.mark((function e(t){var n,c,a,r,l,s,i,u,b,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(I("result","")),t(L("result","")),t(V("result")),n=C.getState(),c=n.game.token.value,a=n.player,r=a.selectedPlanets,l=a.selectedVehicles,s=k(Object.values(r)),i=k(Object.values(l)),4===s.length&&4===i.length){e.next=11;break}return t(I("result","Please select 4 planets and 4 vehicles")),e.abrupt("return");case 11:if(!i.find((function(e){return""===e}))){e.next=14;break}return t(I("result","Please select 4 vehicles")),e.abrupt("return");case 14:return u={token:c,planet_names:s,vehicle_names:i},e.prev=15,e.next=18,P.a.post("/find",u);case 18:b=e.sent,d="",d="success"===b.data.status?"Congratulations! You found the queen on "+b.data.planet_name+".":"Shoot! It's a miss.",t(L("result",d)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(15),t(I("result","Something went wrong. Please try again"));case 27:case"end":return e.stop()}}),e,null,[[15,24]])})));return function(t){return e.apply(this,arguments)}}())},resetFullGame:function(){return e(w())}}}))((function(e){var t=e.selectResult,n=e.launchSearchAsync,c=e.resetFullGame;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(be,{}),Object(D.jsxs)("div",{className:"gamepage",children:[Object(D.jsx)("div",{className:"selectors",children:[1,2,3,4].map((function(e){return Object(D.jsx)("div",{children:Object(D.jsx)(se,{selectorId:e})},e)}))}),Object(D.jsx)("div",{className:"score-display",children:Object(D.jsx)(ue,{})}),Object(D.jsx)("button",{className:"submit",onClick:n,disabled:t.isFetching,children:"Deploy the troops"}),""!==t.value&&Object(D.jsx)("button",{className:"submit",onClick:c,children:"New Game?"})]})]})})),he=Object(l.b)(null,(function(e){return{loadGame:function(){return e(R())}}}))((function(e){return(0,e.loadGame)(),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(G,{}),Object(D.jsx)(s.a,{children:Object(D.jsxs)(i.c,{children:[Object(D.jsx)(i.a,{exact:!0,path:"/",component:je}),Object(D.jsx)(i.a,{exact:!0,path:"*",render:function(){return Object(D.jsx)("h2",{children:"You seem to be lost,me friend"})}})]})})]})})),fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),r(e),l(e)}))};P.a.defaults.baseURL="https://findfalcone.herokuapp.com/",P.a.defaults.headers.common.Accept="application/json",r.a.render(Object(D.jsx)(l.a,{store:C,children:Object(D.jsx)(he,{})}),document.getElementById("root")),fe()}},[[78,1,2]]]);
//# sourceMappingURL=main.9b3545ff.chunk.js.map